fix(machine_calc): garantir persistencia por hora em producao_horaria (write-only)

- Adiciona persistencia defensiva com cliente_id quando suportado pelo repo
- Grava por machine_id do calculo (scoped) e também por effective_machine_id (quando existir)
- Nao altera card/front; apenas alimenta historico
