fix(api): detalhe-dia usa machine_id efetivo (scoped) para evitar horas zeradas no modal

- Resolve effective_machine_id por dia via producao_diaria
- Usa effective_machine_id nas queries de producao_evento e producao_horaria/refugo_horaria
- Retorna effective_machine_id no JSON (debug) e fecha conexao quando aplicavel
