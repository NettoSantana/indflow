fix(machine_calc): persistir producao_horaria por hora com compatibilidade scoped/plain

- Grava em producao_horaria usando machine_id scoped (cliente_id::id) e tambem plain (id) quando aplicavel
- Mantem assinatura do repo (sem novos parametros)
- Nao altera card; apenas garante que o historico encontre as horas
