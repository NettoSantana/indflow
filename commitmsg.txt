fix: historico diario usa fallback em memoria quando producao_horaria esta vazia (opcao B)

- Historico deixa de zerar quando producao_horaria nao tem linhas
- Fallback calcula produzido a partir das OPs/memoria
- Mantem estrutura e HTML existentes
