refactor(machine): separa calculos em machine_calc e mantém rotas enxutas
