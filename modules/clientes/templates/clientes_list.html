{# 
PATH: modules/clientes/templates/clientes_list.html
LAST_RECODE: 2026-02-20 21:20 America/Bahia
MOTIVO: Criar tela de listagem de clientes com botao Adicionar separado.
#}
{% extends "base.html" %}
{% block title %}Clientes — IndFlow{% endblock %}

{% block content %}
<style>
  .wrap{max-width:1100px;margin:0 auto;padding:24px;}
  .card{background:#ffffff;border:1px solid #e5e7eb;border-radius:14px;padding:16px;margin-bottom:16px;}
  .muted{color:#64748b;font-size:14px;}
  .top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}
  .btn-primary{padding:10px 14px;border-radius:10px;background:#2563eb;color:#ffffff;text-decoration:none;font-weight:600;}
  table{width:100%;border-collapse:collapse;margin-top:10px;}
  th,td{padding:10px;border-bottom:1px solid #e5e7eb;text-align:left;font-size:14px;}
  th{background:#f1f5f9;}
  .pill{display:inline-block;padding:3px 10px;border-radius:999px;font-size:12px;font-weight:700;}
  .on{background:#dcfce7;color:#166534;}
  .off{background:#fee2e2;color:#991b1b;}
  .actions form{display:inline;}
  .actions button{padding:6px 10px;border:0;border-radius:8px;background:#ef4444;color:#fff;font-size:12px;cursor:pointer;}
  .actions button.secondary{background:#475569;}
</style>

<div class="wrap">

  <div class="card">
    <div class="top-bar">
      <div>
        <h1 style="margin:0;">Clientes</h1>
        <div class="muted">Gerencie seus clientes (multi-tenant).</div>
      </div>
      <a href="{{ url_for('clientes.novo_cliente') }}" class="btn-primary">
        + Adicionar
      </a>
    </div>
  </div>

  <div class="card">
    <table>
      <thead>
        <tr>
          <th>Nome</th>
          <th>Status</th>
          <th>Criado em (UTC)</th>
          <th style="width:220px;">Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
        <tr>
          <td>
            <b>{{ r["nome"] }}</b>
            <div class="muted">{{ r["id"] }}</div>
          </td>
          <td>
            {% if (r["status"] or "") == "active" %}
              <span class="pill on">ATIVO</span>
            {% else %}
              <span class="pill off">INATIVO</span>
            {% endif %}
          </td>
          <td class="muted">{{ r["created_at"] }}</td>
          <td class="actions">
            {% if (r["status"] or "") == "active" %}
              <form method="post" action="{{ url_for('clientes.deactivate_cliente') }}">
                <input type="hidden" name="cliente_id" value="{{ r['id'] }}">
                <button type="submit">Desativar</button>
              </form>
            {% else %}
              <form method="post" action="{{ url_for('clientes.activate_cliente') }}">
                <input type="hidden" name="cliente_id" value="{{ r['id'] }}">
                <button type="submit" class="secondary">Ativar</button>
              </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
        {% if not rows %}
          <tr>
            <td colspan="4" class="muted">Nenhum cliente cadastrado ainda.</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}